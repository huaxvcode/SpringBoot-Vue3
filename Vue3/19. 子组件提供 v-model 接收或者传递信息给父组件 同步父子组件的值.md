# 19. 子组件提供 v-model 接收或者传递信息给父组件 同步父子组件的值

<u>**v-model: 双向绑定**</u>

v-model 可以同步父子组件信息，属于消息传递的一种功能

基本示例：

<details open><summary>Child.vue</summary>

```html
<!-- Child.vue -->
<script setup>
// 提供一个 v-model 作为向父组件传递信息的接口
const model = defineModel(); 
model.value = 1;
</script>
```

</details>


<details open><summary>Parent.vue</summary>

```html
<!-- 父组件使用 count 接收子组件传递过来的信息 -->
<Child v-model="count" />
```

</details>

## 案例一：

<u>**子传父**</u>

子组件通过 v-model 向父组件传递信息，实现一个定时器：每过一秒递增一次数字：

<details open><summary>Child.vue</summary>

```html
<script setup>
// eslint-disable-next-line no-undef
let model = defineModel();
model.value = -114514;
setInterval(() => {
  model.value++;
}, 1000);
</script>

<template>
  <div></div>
</template>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>

</style>
```

</details>

<details open><summary>Parent.vue</summary>

```html
<script setup>
import ChildComponent from "@/components/ChildComponent.vue";
import {ref} from "vue";

let msg = ref();
</script>

<template>
  <ChildComponent v-model="msg"/>
  <div>子组件传达的信息为：{{ msg }}</div>
</template>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>

</style>
```

</details>

![图 1](../images/674173fd9a7e1e236f49ee3ee3ff547e7fa60ed833c5da8db74b39894ed01730.gif)  


## 案例二：

<u>**父传子**</u>

子组件提供 v-model 接收父组件传递过来的信息，实现计数器的效果：

<details open><summary>Child.vue</summary>

```html
<script setup>
// eslint-disable-next-line no-undef
let model = defineModel();
// model.value = -114514;
// setInterval(() => {
//   model.value++;
// }, 1000);
</script>

<template>
  <div>父子组件同步的信息：{{ model }}</div>
</template>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>

</style>
```

</details>

<details open><summary>Parent.vue</summary>

```html
<script setup>
import ChildComponent from "@/components/ChildComponent.vue";
import {ref} from "vue";

let msg = ref(0);
setInterval(() => msg.value++, 1000);
</script>

<template>
  <ChildComponent v-model="msg"/>
</template>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>

</style>
```

</details>

![图 0](../images/a0478925d9cc0eab67bc50ac9b56fb2a5af5d5e47af3295ebb3189c646097e49.gif)  


## 案例三：带多种选项的 v-model

父组件提供一个 `0 ~ 9` 的随机值，子组件根据提供的值改变背景颜色，并向父节点传达当前的颜色

